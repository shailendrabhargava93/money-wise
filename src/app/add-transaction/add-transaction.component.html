<form
  nz-form
  [nzLayout]="'vertical'"
  [formGroup]="form"
  class="p-1 h-full justify-center"
>
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="category" nzRequired
      >Choose Category</nz-form-label
    >

    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="This is required">
      <nz-select
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Select category"
        formControlName="category"
      >
        <nz-option
          nzCustomContent
          *ngFor="let opt of categories"
          nzLabel="{{ opt.name }}"
          nzValue="{{ opt.name }}"
        >
          <span class="flex flex-row">
            <img src="{{ opt.icon }}" width="25px" height="25px" />
            &nbsp;&nbsp;{{ opt.name }}
          </span>
        </nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="amount" nzRequired
      >Amount</nz-form-label
    >
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="This is required">
      <nz-input-group [nzAddOnBefore]="(currency | async)?.symbol">
        <input
          nz-input
          type="number"
          placeholder="Enter amount"
          formControlName="amount"
        />
      </nz-input-group>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="title"
      >Expense Details</nz-form-label
    >
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="This is required">
      <input
        placeholder="Enter expense title"
        nz-input
        formControlName="title"
      />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Transaction Date</nz-form-label>
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="This is required">
      <nz-date-picker formControlName="date"></nz-date-picker>
    </nz-form-control>
    <span class="inline-flex mt-3">
      <span
        class="text-xs text-gray-400 mr-1"
        nz-tooltip
        nzTooltipTitle="Suggestions"
        nz-icon
        nzType="info-circle"
        nzTheme="outline"
      ></span>
      <nz-tag
        class="cursor-pointer"
        *ngFor="let date of dateSuggestions"
        [nzColor]="'geekblue'"
        (click)="onDateClick(date)"
      >
        {{ date.toLocaleDateString('fr-CA') }}
      </nz-tag>
    </span>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired
      >Include in Budget</nz-form-label
    >
    <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="This is required">
      <nz-select
        nzShowSearch
        nzAllowClear
        nzPlaceHolder="Select Budget"
        formControlName="budgetId"
      >
        <nz-option
          nzCustomContent
          *ngFor="let opt of budgets"
          nzLabel="{{ opt.name }}"
          nzValue="{{ opt.id }}"
        >
          {{ opt.name }}
        </nz-option>
      </nz-select>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item nz-row class="register-area flex content-center">
    <button
      *ngIf="!isUpdate"
      nz-button
      class="primary rounded-full w-full"
      (click)="submitForm()"
    >
      Add Transaction
    </button>
    <button
      *ngIf="isUpdate"
      nz-button
      class="primary rounded-full w-full"
      (click)="updateTxn()"
    >
      Update Transaction
    </button>
  </nz-form-item>
</form>
